# Erlang游戏服务器管理脚本使用说明

## 概述

本套脚本提供了完整的Erlang游戏服务器管理功能，包括启动、管理、热更新、数据库操作等。

## 脚本列表

### 1. main_menu.bat - 主菜单
- 整合所有功能的入口点
- 提供统一的管理界面

### 2. start_server.bat - 服务器启动
- 启动登录服务器
- 启动跨服服务器
- 启动游戏服务器
- 一键启动所有服务器

### 3. server_manager.bat - 服务器管理
- 重启服务器
- 热更新模块
- 清空数据库
- 查看服务器状态
- 停止所有服务器
- 编译项目

### 4. hot_reload.bat - 热更新
- 编译并热更新指定模块
- 编译并热更新所有模块
- 热更新时间相关模块
- 热更新数据库相关模块
- 热更新网络相关模块

### 5. database_manager.bat - 数据库管理
- 清空数据库（玩家数据、游戏数据、系统数据）
- 备份数据库
- 恢复数据库
- 查看数据库状态
- 重置数据库

### 6. quick_start.bat - 一键启动
- 快速启动所有服务器
- 适合开发和测试环境

## 使用方法

### 启动主菜单
```bash
# 双击运行或在命令行中执行
main_menu.bat
```

### 直接启动特定功能
```bash
# 启动服务器
start_server.bat

# 管理服务器
server_manager.bat

# 热更新
hot_reload.bat

# 管理数据库
database_manager.bat

# 一键启动所有服务器
quick_start.bat
```

## 功能详解

### 服务器启动
1. **登录服务器**: 处理玩家登录认证
2. **跨服服务器**: 处理跨服通信和数据同步
3. **游戏服务器**: 处理游戏逻辑和玩家交互

### 热更新
1. **编译模块**: 使用rebar3编译指定模块
2. **热更新**: 在Erlang shell中执行`c:l(module_name)`
3. **重新注册**: 对于某些模块需要重新注册处理器

### 数据库管理
1. **清空数据**: 支持按类型清空数据
2. **备份恢复**: 支持数据备份和恢复
3. **状态检查**: 查看数据库运行状态

## 注意事项

### 安全警告
- 清空数据库操作不可恢复，请谨慎使用
- 建议在执行危险操作前先备份数据

### 使用建议
- 开发环境可以使用一键启动
- 生产环境建议使用单独启动和管理
- 热更新后需要检查模块功能是否正常

### 故障排除
- 如果编译失败，检查代码语法错误
- 如果启动失败，检查端口是否被占用
- 如果热更新失败，检查模块是否正确编译

## 配置文件

### cross.config - 跨服服务器配置
- 端口: 6000
- 最大连接数: 10000
- 心跳间隔: 30秒

### login.config - 登录服务器配置
- 端口: 7000
- 最大连接数: 5000
- 会话超时: 5分钟

### game.config - 游戏服务器配置
- 端口: 8000
- 最大连接数: 20000
- 每世界最大玩家数: 1000

## 开发工作流

1. **开发阶段**: 使用热更新快速迭代
2. **测试阶段**: 使用一键启动快速部署
3. **生产阶段**: 使用单独启动和管理脚本

## 技术支持

如有问题，请查看项目文档或联系开发团队。 